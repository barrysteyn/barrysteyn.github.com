


<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web Presense Of Barry Steyn - Software Engineer, Entrepreneur">
    <meta name="author" content="Barry Steyn">
    <link rel="shortcut icon" href="theme/img/doctrina-icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="theme/img/apple-touch-icon-144-precomposed.png">

    <title>Doctrina - 	Maximum Height Of A Red-Black Tree
</title>

    <!-- Bootstrap Base CSS -->
    <link href="http://doctrina.org/theme/css/base.css" rel="stylesheet" type="text/css">

    <!-- Custom CSS -->
    <link href="http://doctrina.org/theme/css/main.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,800|Source+Code+Pro" rel="stylesheet">

<link rel="stylesheet" href="http://doctrina.org/theme/css/print.css" type="text/css" media="print" />
</head>

<body id="page-top">
    <!-- Top Nav Bar -->
    <nav id="navbar-top" class="navbar navbar-fixed-top navbar-offset-start " role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand " href="/index.html#page-top">
                    <img alt="brand for doctrina" src="http://doctrina.org/theme/img/apple-touch-icon-144-precomposed.png" style="float: left; max-height:100%;" />
                    <span style="padding-left: 0.5em;">Doctrina</span>
                </a>
                
                <button type="button" class="navbar-toggle" style="" data-toggle="collapse" data-target="#navigation-menu">
<i class="fa fa-bars"></i>                </button>

            </div>

            <div class="collapse navbar-collapse navbar-right" id="navigation-menu">
                        <div>
                            <ul class="nav navbar-nav">
<li class="visible-grid-float-breakpoint"><a href="/index.html">Home</a></li>                                <li><a href="category/article.html"><span>Articles</span></a></li> 
                                <li><a href="#comments"><span>Comments</span></a></li> 
                                <li><a href="#footer"><span>Connect</span></a></li> 
                            </ul>
                        </div>
            </div>


        </div>
    </nav>
    <!-- End Top Nav Bar -->

    <!-- User Defined Sections -->
	<section class="container-fluid title">
	<div class="row">
		<div class="col-md-12">
			<h1><a href="" rel="bookmark" title="Permalink to Maximum Height Of A Red-Black Tree">	Maximum Height Of A Red-Black Tree
</a></h1>
			<span>
				<a href="http://doctrina.org/index.html#about"><img src="http://doctrina.org/theme/img/me.jpg" class="img-rounded"></img></a>
			</span>
		</div>
	</div>
</section>

<section class="content">
	<div class="container">
		<div class="row">
				<div class="col-xs-12 text-center metadata">
					<ul class="center-list">
						<li class="print text-center" style="font-size: 1.5em; margin-top: 1.0em;"><strong>Barry Steyn</strong></li>
						<li class="print text-center" style="margin-bottom: 0.5em">barry.steyn@gmail.com</li>
						<li><b>Published</b>: 11  May  2015</li>
					</ul>
				</div>
		</div>
		<div class="row">
				<div class="col-xs-12 col-md-1 col-md-push-10 text-center">
<div id="share">
	<div>
		<span class="toctitle">Share</span>
	</div>
	<div>
	    <a class="fa-stack fa-lg twitter" href="https://twitter.com/intent/tweet?text=Maximum%20Height%20Of%20A%20Red-Black%20Tree&url=http%3A//doctrina.org/maximum-height-of-red-black-tree.html&via=">
	        <i class="fa fa-circle fa-stack-2x"></i>
	        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
	    </a>
	</div>
	<div>
		<a class="fa-stack fa-lg facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3A//doctrina.org/maximum-height-of-red-black-tree.html">
		    <i class="fa fa-circle fa-stack-2x"></i>
		    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</a>
	</div>
	<div>
		<a class="fa-stack fa-lg google-plus" href="https://plus.google.com/share?url=http%3A//doctrina.org/maximum-height-of-red-black-tree.html">
		    <i class="fa fa-circle fa-stack-2x"></i>
		    <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</a>
	</div>
	<div>
	    <a class="fa-stack fa-lg linkedin" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A//doctrina.org/maximum-height-of-red-black-tree.html&title=Maximum%20Height%20Of%20A%20Red-Black%20Tree">
	        <i class="fa fa-circle fa-stack-2x"></i>
	        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
	    </a>
	</div>
</div>				</div>				


			<div id="content" class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2 col-md-pull-1">
	<div class="article-content">
		<h1 id="introduction">Introduction<a href="#introduction" title="Permanent link" class="headerlink"></a></h1>
<p>My friend and colleague, <a href="http://dome.hobbits.grus.uberspace.de/">Dominik Messinger</a><sup class="print">L1</sup> was fortunate to learn about abstract data structures in high school<sup id="sf-maximum-height-of-red-black-tree-1-back"><a href="#sf-maximum-height-of-red-black-tree-1" title="He is German, so I think this is a nod to the excellent school system in Germany." class="simple-footnote">1</a></sup>. After chatting to him one day, the topic of red-black trees came up. He studied <a href="http://en.wikipedia.org/wiki/AVL_tree">AVL trees</a><sup class="print">L2</sup> in depth at high school, but did not do the same for red-black trees. After this chat, I realized I had not formalized this topic in my mind either. So I decided to choose one topic and write about...</p>
<p>So here is an analysis of the maximum height of a red-black trees.</p>
<h1 id="background-knowledge">Background Knowledge<a href="#background-knowledge" title="Permanent link" class="headerlink"></a></h1>
<h2 id="tree-level">Tree Level<a href="#tree-level" title="Permanent link" class="headerlink"></a></h2>
<p>A node's level is the number of parent node ancestors the node has. Level is zero based (the root is at level 0 since it has no ancestors).</p>
<p><img src="images/binary-tree-level.png"></p>
<p>An important observation is that a node at level <span class="math">\(k\)</span> has <span class="math">\(k+1\)</span> parent ancestors.</p>
<h2 id="full-and-complete-binary-tree">Full And Complete Binary Tree<a href="#full-and-complete-binary-tree" title="Permanent link" class="headerlink"></a></h2>
<p>A tree that is both <em>full and complete</em><sup id="sf-maximum-height-of-red-black-tree-2-back"><a href="#sf-maximum-height-of-red-black-tree-2" title="Full and complete binary trees are sometimes called perfect binary trees." class="simple-footnote">2</a></sup> has the following properties:</p>
<ol>
<li>All non-leaf nodes have two children.</li>
<li>All leaf nodes are at the same level.</li>
</ol>
<p><img src="images/full-complete-binary-tree.png"></p>
<p>A full and complete binary tree with <span class="math">\(n\)</span> nodes and <span class="math">\(k\)</span> levels has the following relationship:
</p>
<div class="math">\begin{equation*}
n = 2^{k+1}-1
\end{equation*}</div>
<h1 id="red-black-tree">Red-Black Tree<a href="#red-black-tree" title="Permanent link" class="headerlink"></a></h1>
<h2 id="red-black-tree-invariants">Red-Black Tree Invariants<a href="#red-black-tree-invariants" title="Permanent link" class="headerlink"></a></h2>
<p>A red-black tree is a <a href="http://en.wikipedia.org/wiki/Binary_search_tree">binary search tree</a><sup class="print">L3</sup> that is constrained by the following 4 invariants:</p>
<ol>
<li>Each node is either red or black.</li>
<li>The root node is black.</li>
<li>Every red node must either have zero or two black chilren.</li>
<li>Every root-null path must have the same number of black nodes.</li>
</ol>
<h3 id="the-maximum-height-of-a-red-black-tree">The Maximum Height Of A Red-Black Tree<a href="#the-maximum-height-of-a-red-black-tree" title="Permanent link" class="headerlink"></a></h3>
<p>The maximum height of a red-black tree is the root-null path that contains the most number of nodes. Ironically, an examiniation of the shortest root-null path is needed to calculate the maximum height.</p>
<h4 id="length-of-the-shortest-root-null-path">Length Of The Shortest Root-Null Path<a href="#length-of-the-shortest-root-null-path" title="Permanent link" class="headerlink"></a></h4>
<p>By invariant 4, the <em>maximum number of black nodes</em> in any root-null path is restricted by the number of nodes in the <em>shortest</em> root-null path. Assume the shortest root-null path is at level <span class="math">\(k\)</span>:</p>
<ul>
<li>There are <span class="math">\(k+1\)</span> nodes in the root-null path at level <span class="math">\(k\)</span>.</li>
<li>There is a <em>full</em> and <em>complete</em> binary subtree with <span class="math">\(k\)</span> levels.</li>
</ul>
<p>For example, if the shortest root-null path is at level 2, the full and complete binary subtree would look like the image below:</p>
<p><img src="images/full-complete-binary-subtree.png"></p>
<p>Suppose the full and complete binary subtree has <span class="math">\(n\)</span> nodes, then using the fact that <span class="math">\(n=2^{k+1}-1\)</span>, the number of nodes in the root-null path (i.e. <span class="math">\(k+1\)</span>) is logarithmic in <span class="math">\(n\)</span>:</p>
<div class="math">\begin{array}{ccc}
n &amp; = &amp; 2^{k+1}-1 \\
k+1 &amp; = &amp; \log_2(n+1)
\end{array}</div>
<p><em>Due to invariant 4</em>, the maximum number of <strong>black nodes</strong> in any root-null path is <span class="math">\(\log_2(n+1)\)</span></p>
<h4 id="length-of-the-longest-root-null-path">Length Of The Longest Root-Null Path<a href="#length-of-the-longest-root-null-path" title="Permanent link" class="headerlink"></a></h4>
<p>The longest root-null path will have <span class="math">\(\log_2(n+1)\)</span> black nodes (the maximum that it can have due to invariant 4). The question now becomes: How many red nodes can be present? By invariant 3, a red node must have black node children. This restricts the maximum number of red nodes to being placed between the black nodes:</p>
<p><img src="images/red-black-in-between.png"></p>
<p>The maximum number of red nodes in a root-null path is therefore constrained by the maximum number of black nodes, which is <span class="math">\(\log_2(n+1)\)</span>. So the length of the longest root-null path is:</p>
<div class="math">\begin{array}{lcl}
\text{Maximum height} &amp;=&amp; \text{max black nodes} + \text{max red nodes} \\
                      &amp;=&amp; \log_2(n+1) + \log_2(n+1) \\
                      &amp;=&amp; 2\cdot\log_2(n+1)
\end{array}</div>
<p>This proves that the height of a red-black tree is <span class="math">\(O\left(\log n\right)\)</span> where <span class="math">\(n\)</span> is the total number of nodes. It is also worth noting that the constant factor in the big-O notation is <span class="math">\(2\)</span>, which is very low.</p>
<h2 id="searching-is-logarithmic">Searching Is Logarithmic<a href="#searching-is-logarithmic" title="Permanent link" class="headerlink"></a></h2>
<p>In a binary search tree, the time complexity of a search operation is governed by the maximum height of the tree. This means that search in a red-black tree is logarithmic time complexity.</p>
<h1 id="conclusion">Conclusion<a href="#conclusion" title="Permanent link" class="headerlink"></a></h1>
<p>A red-black tree is probably the most used balanced binary search tree algorithm. It is a little bit more work to show that <em>update</em>, <em>delete</em> and <em>insert</em> is also logarithmic, but any proof would rely upon the fact the maximum height is logarithmic.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "true";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }
    
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: '[math]'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script><h2 class="print">Links</h2><div style="margin-left: 2.0em;" class="print"><ol class="print-links"><li>http://dome.hobbits.grus.uberspace.de/</li><li>http://en.wikipedia.org/wiki/AVL_tree</li><li>http://en.wikipedia.org/wiki/Binary_search_tree</li></ol></div><ol class="simple-footnotes"><li id="sf-maximum-height-of-red-black-tree-1">He is German, so I think this is a nod to the excellent school system in Germany. <a href="#sf-maximum-height-of-red-black-tree-1-back" class="simple-footnote-back">↩</a></li><li id="sf-maximum-height-of-red-black-tree-2">Full and complete binary trees are sometimes called <em>perfect binary trees</em>. <a href="#sf-maximum-height-of-red-black-tree-2-back" class="simple-footnote-back">↩</a></li></ol>

		<div class="print text-center" style="margin: 1.5em 0.5em 0.1em 0.5em; padding: 0.2em; border: 1px solid #000; page-break-inside: avoid;">
			Thank you for printing this article. Please do not forget to come back to http://doctrina.org for fresh articles.
		</div>
	</div>
			</div>
		</div>
	</div>
</section>

	<section class="content" id="comments">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<div class="content-border">
						<h2>Comments</h2>
        				<div class="divider-grey"></div>
						<a id="disqus" href="http://doctrina.org/maximum-height-of-red-black-tree.html#disqus_thread">0 Comments</a>
						<div id="disqus_thread"></div>
					</div>
			    </div>
			</div>
    	</div>
	</section>
    <!-- End Sections -->

    <!-- Connect -->
    <section id="connect" class="text-center title">
        <div class="container">
            <h1>Connect</h1>
            
            <div class="row" style="padding: 1.0em 0;">
                Found anything useful on this site? Drop me a line, I'd love to hear about it.
            </div>
            
            <div class="divider-grey"></div>
            
            <div class="row">
                <div class="col-xs-12 col-md-6 col-md-offset-3">
                    <div>
                        <a class="fa-stack fa-lg x" id="x" tabindex="0">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg twitter" href="https://twitter.com/barrysteyn" target="_blank">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg linkedin" href="https://www.linkedin.com/in/barrysteyn" target="_blank">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg github" href="https://github.com/barrysteyn" target="_blank">
                            <i class="fa fa-github fa-stack-2x"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div id="footer" class="row">
                <div class="col-xs-12">
                    <p>&copy; <script>document.write(new Date().getFullYear());</script> Barry Steyn. All Rights Reserved.
                </div>
            </div>
            <!-- End Footer -->
        </div>
    </section>
    <!-- End Connect -->


    <!-- JavaScript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript">
        var scrollspies = {};
        scrollspies.body = {
            'target': '#navigation-menu'
        };

		//Do not remove navbar-offset-start class
	var navbarOffset = false;

	//Scrollspy object
    scrollspies.body = {
        'target': '.toc'
    };


	$(function() {
		$('#content div.article-content a[href^="http"]').attr('target','_blank');

		var disqus = {
			shortname: 'doctrina',
			identifier: 'http://doctrina.org/maximum-height-of-red-black-tree.html',
			url: 'http://doctrina.org/maximum-height-of-red-black-tree.html',
			developer: 0
		};

		disqus_comments(disqus);
	});
    </script>
    <script src="http://doctrina.org/theme/js/main.js"></script>
    <!-- End JavaScript -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-33789117-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>

</html>