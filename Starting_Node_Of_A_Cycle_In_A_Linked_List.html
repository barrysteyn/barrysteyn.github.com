


<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web Presense Of Barry Steyn - Software Engineer, Entrepreneur">
    <meta name="author" content="Barry Steyn">
    <link rel="shortcut icon" href="theme/img/doctrina-icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="theme/img/apple-touch-icon-144-precomposed.png">

    <title>Doctrina - 	The Starting Node Of A Cycle In A Linked List
</title>

    <!-- Bootstrap Base CSS -->
    <link href="http://doctrina.org/theme/css/base.css" rel="stylesheet" type="text/css">

    <!-- Custom CSS -->
    <link href="http://doctrina.org/theme/css/main.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,400italic,600,800|Source+Code+Pro" rel="stylesheet">

<link rel="stylesheet" href="http://doctrina.org/theme/css/print.css" type="text/css" media="print" />
</head>

<body id="page-top">
    <!-- Top Nav Bar -->
    <nav id="navbar-top" class="navbar navbar-fixed-top navbar-offset-start " role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand " href="/index.html#page-top">
                    <img alt="brand for doctrina" src="http://doctrina.org/theme/img/apple-touch-icon-144-precomposed.png" style="float: left; max-height:100%;" />
                    <span style="padding-left: 0.5em;">Doctrina</span>
                </a>
                
                <button type="button" class="navbar-toggle" style="" data-toggle="collapse" data-target="#navigation-menu">
<i class="fa fa-bars"></i>                </button>

            </div>

            <div class="collapse navbar-collapse navbar-right" id="navigation-menu">
                        <div>
                            <ul class="nav navbar-nav">
<li class="visible-grid-float-breakpoint"><a href="/index.html">Home</a></li>                                <li><a href="category/article.html"><span>Articles</span></a></li> 
                                <li><a href="#comments"><span>Comments</span></a></li> 
                                <li><a href="#footer"><span>Connect</span></a></li> 
                            </ul>
                        </div>
            </div>


        </div>
    </nav>
    <!-- End Top Nav Bar -->

    <!-- User Defined Sections -->
	<section class="container-fluid title">
	<div class="row">
		<div class="col-md-12">
			<h1><a href="" rel="bookmark" title="Permalink to The Starting Node Of A Cycle In A Linked List">	The Starting Node Of A Cycle In A Linked List
</a></h1>
			<span>
				<a href="http://doctrina.org/index.html#about"><img src="http://doctrina.org/theme/img/me.jpg" class="img-rounded"></img></a>
			</span>
		</div>
	</div>
</section>

<section class="content">
	<div class="container">
		<div class="row">
				<div class="col-xs-12 text-center metadata">
					<ul class="center-list">
						<li class="print text-center" style="font-size: 1.5em; margin-top: 1.0em;"><strong>Barry Steyn</strong></li>
						<li class="print text-center" style="margin-bottom: 0.5em">barry.steyn@gmail.com</li>
						<li><b>Published</b>: 18  Feb  2015</li>
					</ul>
				</div>
		</div>
		<div class="row">
				<div class="col-xs-12 col-md-1 col-md-push-10 text-center">
<div id="share">
	<div>
		<span class="toctitle">Share</span>
	</div>
	<div>
	    <a class="fa-stack fa-lg twitter" href="https://twitter.com/intent/tweet?text=The%20Starting%20Node%20Of%20A%20Cycle%20In%20A%20Linked%20List&url=http%3A//doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html&via=">
	        <i class="fa fa-circle fa-stack-2x"></i>
	        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
	    </a>
	</div>
	<div>
		<a class="fa-stack fa-lg facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3A//doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html">
		    <i class="fa fa-circle fa-stack-2x"></i>
		    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
		</a>
	</div>
	<div>
		<a class="fa-stack fa-lg google-plus" href="https://plus.google.com/share?url=http%3A//doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html">
		    <i class="fa fa-circle fa-stack-2x"></i>
		    <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
		</a>
	</div>
	<div>
	    <a class="fa-stack fa-lg linkedin" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A//doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html&title=The%20Starting%20Node%20Of%20A%20Cycle%20In%20A%20Linked%20List">
	        <i class="fa fa-circle fa-stack-2x"></i>
	        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
	    </a>
	</div>
</div>				</div>				


			<div id="content" class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2 col-md-pull-1">
	<div class="article-content">
		<h1 id="introduction">Introduction<a title="Permanent link" class="headerlink" href="#introduction"></a></h1>
<p>Given a <a href="http://en.wikipedia.org/wiki/Linked_list#Singly_linked_list">singly linked list</a><sup class="print">L1</sup> that has a cycle, how can one determine the first node in the cycle?</p>
<p><img src="http://doctrina.org/images/ll-cycle-problem.png"></p>
<p>Using the image above as an example, the aim would be to find the orange node.</p>
<h1 id="algorithm">Algorithm<a title="Permanent link" class="headerlink" href="#algorithm"></a></h1>
<p><img src="http://doctrina.org/images/ll-cycle-intersection.png">
Use two iterators, but make one move at twice the speed of the other. Starting from the head (first) node of the list, these iterators will meet at the red colored node. Now set one iterator back to the head node and leave the other at the red node. Moving both iterators at normal speed where they meet for the second time will be the orange node.</p>
<p>Go through this algorithm yourself with the above image, and it can easily be that the algorithm works for this example. Ever wondered why it worked? I did, but I never really thought of it until I was chatting to my colleague <a href="http://www.jooyandeh.com/">Reza Jooyandeh</a><sup class="print">L2</sup>. Reza immediately saw a nice way to prove this algorithm, I am just formalizing it here.</p>
<h2 id="history">History<a title="Permanent link" class="headerlink" href="#history"></a></h2>
<p>This algorithm actually has a formal name: It is called <a href="http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare">Floyd's cycle-finding algorithm</a><sup class="print">L3</sup> and can be used to find cycles in a graph (a linked-list is also a graph) without using extra space in linear time. It is named after <a href="http://en.wikipedia.org/wiki/Robert_W._Floyd">Robert W. Floyd</a><sup class="print">L4</sup>.</p>
<h1 id="proof-of-the-algorithm">Proof Of The Algorithm<a title="Permanent link" class="headerlink" href="#proof-of-the-algorithm"></a></h1>
<p><img src="http://doctrina.org/images/ll-cycle-definition.png"></p>
<p>Assume the following (refer to the above image):</p>
<ul>
<li>The node that starts the cycle is colored orange.</li>
<li>There are <span class="math">\(X\)</span> number of nodes up to and including the orange node.</li>
<li>The cycle contains <span class="math">\(Y\)</span> number of nodes where <span class="math">\(Y \geq 2\)</span> (since by definition, a cycle must contain at least two nodes).</li>
<li>The two iterators first meet after <span class="math">\(Z\)</span> nodes from the start of the cycle (these nodes are colored red in the above image).</li>
</ul>
<h2 id="aim-of-the-proof">Aim Of The Proof<a title="Permanent link" class="headerlink" href="#aim-of-the-proof"></a></h2>
<p>The aim is to prove that the starting node of the cycle will be reached after advancing <span class="math">\(X\)</span> number of nodes from where the iterators first meet (<span class="math">\(Z\)</span> nodes into the cycle). Why does this suffice? Because we assume that there are <span class="math">\(X\)</span> number of nodes leading up to the start of the cycle, so advancing <span class="math">\(X\)</span> number of nodes inside the cycle to get to the start implies that the two iterators will meet at the beginning of the cycle.</p>
<h2 id="proof">Proof<a title="Permanent link" class="headerlink" href="#proof"></a></h2>
<p>The proof is done in two parts. It is proved that:</p>
<ol>
<li>The fast iterator cannot "jump" over the slow iterator in the cycle. </li>
<li>Advancing by <span class="math">\(X\)</span> nodes from <span class="math">\(Z\)</span> nodes into the cycle will yield the beginning of the cycle.</li>
</ol>
<h3 id="the-fast-iterator-cannot-jump-over-the-slow-iterator-in-the-cycle">The fast iterator cannot "jump" over the slow iterator in the cycle<a title="Permanent link" class="headerlink" href="#the-fast-iterator-cannot-jump-over-the-slow-iterator-in-the-cycle"></a></h3>
<p>This proved by contradiction. Assume the fast iterator will always jump over the slow iterator. Then if the slow iterator ends at position <span class="math">\((x+1)\)</span>, the fast iterator will end at <span class="math">\((x+2)\)</span>. But this can only happen if both iterators started at position <span class="math">\(x\)</span>, which is a contracdiction.</p>
<p>This has three implications:</p>
<ol>
<li>The iterators will <em>always</em> meet in the cycle.</li>
<li>The slow iterator cannot complete more than one cycle before the intersection occurs.</li>
<li>By the above implication, this algorithm is linear in the number of nodes present: <span class="math">\(O(n)\)</span></li>
</ol>
<p>The second implication above may need some explaining. The cycle has <span class="math">\(Y\)</span> nodes, and while the slow iterator advances over those nodes, the fast iterator will catch up to it. As shown above, the fast iterator cannot jump over the slow iterator and therefore they will meet (I leave this as an exercise to the reader to prove more formally).</p>
<h3 id="advancing-by-x-nodes-from-z-nodes-into-the-cycle-will-yield-the-beginning-of-the-cycle">Advancing by <span class="math">\(X\)</span> nodes from <span class="math">\(Z\)</span> nodes into the cycle will yield the beginning of the cycle.<a title="Permanent link" class="headerlink" href="#advancing-by-x-nodes-from-z-nodes-into-the-cycle-will-yield-the-beginning-of-the-cycle"></a></h3>
<p>To start the proof, note that the two iterators first meet after <span class="math">\(Z\)</span> nodes from the start of the cycle. The iterator that advances at normal speed would have progressed <span class="math">\(X+Z\)</span>. The iterator that advances at double speed could potentially have gone round the cycle many times, so it would have progressed <span class="math">\(X+n\cdot Y+Z\)</span> nodes, where <span class="math">\(n \in \mathbb{N}\)</span>. The proof starts by establishing a relationship between these iterators: The number of nodes progressed by the normal iterator at double speed (i.e. <span class="math">\(2\cdot (X+Y)\)</span>) is equal to the number of nodes progressed by the fast iterator (i.e. <span class="math">\(X+n\cdot Y+Z\)</span>).</p>
<div class="math">\begin{array}{ll}
X+n\cdot Y+Z &amp; = &amp; 2\cdot (X+Z) \text{ where } n \in \mathbb{N} \\
Z+X &amp; = &amp; n\cdot Y \\
Z+X &amp; = &amp; 0\bmod Y \\
\end{array}</div>
<p>
This proves that advancing by <span class="math">\(X\)</span> nodes from <span class="math">\(Z\)</span> will get to the start of the cylce.</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "true";

    if (true) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }
    
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: '[math]'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script><h2 class="print">Links</h2><div class="print"><ol class="print-links"><li>http://en.wikipedia.org/wiki/Linked_list#Singly_linked_list</li><li>http://www.jooyandeh.com/</li><li>http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare</li><li>http://en.wikipedia.org/wiki/Robert_W._Floyd</li></ol></div>

		<div class="print text-center" style="margin: 1.5em 0.5em 0.1em 0.5em; padding: 0.2em; border: 1px solid #000; page-break-inside: avoid;">
			Thank you for printing this article. Please do not forget to come back to http://doctrina.org for fresh articles.
		</div>
	</div>
			</div>
		</div>
	</div>
</section>

	<section class="content" id="comments">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<div class="content-border">
						<h2>Comments</h2>
        				<div class="divider-grey"></div>
						<a id="disqus" href="http://doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html#disqus_thread">0 Comments</a>
						<div id="disqus_thread"></div>
					</div>
			    </div>
			</div>
    	</div>
	</section>
    <!-- End Sections -->

    <!-- Connect -->
    <section id="connect" class="text-center title">
        <div class="container">
            <h1>Connect</h1>
            
            <div class="row" style="padding: 1.0em 0;">
                Found anything useful on this site? Drop me a line, I'd love to hear about it.
            </div>
            
            <div class="divider-grey"></div>
            
            <div class="row">
                <div class="col-xs-12 col-md-6 col-md-offset-3">
                    <div>
                        <a class="fa-stack fa-lg x" id="x" tabindex="0">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg twitter" href="https://twitter.com/barrysteyn" target="_blank">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg linkedin" href="https://www.linkedin.com/in/barrysteyn" target="_blank">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                        </a>
                        <a class="fa-stack fa-lg github" href="https://github.com/barrysteyn" target="_blank">
                            <i class="fa fa-github fa-stack-2x"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div id="footer" class="row">
                <div class="col-xs-12">
                    <p>&copy; <script>document.write(new Date().getFullYear());</script> Barry Steyn. All Rights Reserved.
                </div>
            </div>
            <!-- End Footer -->
        </div>
    </section>
    <!-- End Connect -->


    <!-- JavaScript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript">
        var scrollspies = {};
        scrollspies.body = {
            'target': '#navigation-menu'
        };

		//Do not remove navbar-offset-start class
	var navbarOffset = false;

	//Scrollspy object
    scrollspies.body = {
        'target': '.toc'
    };


	$(function() {
		$('#content div.article-content a[href^="http"]').attr('target','_blank');

		var disqus = {
			shortname: 'doctrina',
			identifier: 'http://doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html',
			url: 'http://doctrina.org/Starting_Node_Of_A_Cycle_In_A_Linked_List.html',
			developer: 0
		};

		disqus_comments(disqus);
	});
    </script>
    <script src="http://doctrina.org/theme/js/main.js"></script>
    <!-- End JavaScript -->
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-33789117-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>

</html>